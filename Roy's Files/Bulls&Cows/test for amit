private static boolean[] updateGuess(boolean[] possibleNumbers, int[] guess, int[] result) {
    int bulls = result[0];
    int cows = result[1];

    for (int i = 0; i < possibleNumbers.length; i++) {
        if (possibleNumbers[i]) {
            int[] potentialGuess = toArray(i, guess.length);
            
            // Count bulls and cows for potentialGuess
            int potentialBulls = 0, potentialCows = 0;
            boolean[] cowCounted = new boolean[guess.length];

            for (int j = 0; j < guess.length; j++) {
                if (potentialGuess[j] == guess[j]) {
                    potentialBulls++;
                } else {
                    for (int k = 0; k < guess.length; k++) {
                        if (j != k && !cowCounted[k] && potentialGuess[j] == guess[k]) {
                            potentialCows++;
                            cowCounted[k] = true;
                            break;
                        }
                    }
                }
            }

            // Update possibleNumbers array
            if (potentialBulls != bulls || potentialCows != cows) {
                possibleNumbers[i] = false;
            }
        }
    }
    return possibleNumbers;
}
